using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

/*code for a simple calculator taken from https://code.msdn.microsoft.com/vstudio/Simple-Calculator-54ec8e4a and edited to be mine.
 to help me learn how to use C#. It is still buggy and I am not sure how certain parts of it work just yet*/

namespace Simple_Calculator
{
    //Program must store two numbers, save as var a or b, via input with the form.
    //switch case for numerical operators. do a+b, a-b, a*b or a/b
    public partial class SimpleCalculator : Form
    {
        string operand1 = string.Empty;
        string operand2 = string.Empty;
        string result = ""; //result of operand1 operation operand2
        //giving result a default value fixed null reference problem but did it create unintended problems?
        char operation; //either +,-,/,x
        public SimpleCalculator()
        {
            InitializeComponent();
        }
     
         private void SimpleCalculator_Load(object sender, EventArgs e)
         {
             label1.Click += new EventHandler(label_Click);
             label2.Click += new EventHandler(label_Click);
             label3.Click += new EventHandler(label_Click);
             label4.Click += new EventHandler(label_Click);
             label5.Click += new EventHandler(label_Click);
             label6.Click += new EventHandler(label_Click);
             label7.Click += new EventHandler(label_Click);
             label8.Click += new EventHandler(label_Click);
             label9.Click += new EventHandler(label_Click);
             label0.Click += new EventHandler(label_Click);
             decimallabel.Click += new EventHandler(label_Click);
             equalslabel.Click += new EventHandler(label_Click);

         }
       
        private void label_Click(object sender, EventArgs e)
        {                   
            try
            {
                Label label = sender as Label;
                switch (label.Name)
                { 
                    //ERR if display += number, get double numbers
                     // if display + number, only can type in 1 number at a time
                        
                    case "label1":
                        display.Text += "1";
                        break;
                    case "label2":
                        display.Text += "2";
                        break;
                    case "label3":
                        display.Text += "3";
                        break;
                    case "label4":
                        display.Text += "4";
                        break;
                    case "label5":
                        display.Text += "5";
                        break;
                    case "label6":
                        display.Text += "6";
                        break;
                    case "label7":
                        display.Text += "7";
                        break;
                    case "label8":
                        display.Text += "8";
                        break;
                    case "label9":
                        display.Text += "9";
                        break;
                    case "label0":
                        display.Text += "0";
                        break;
                    case "decimallabel":
                        if (!display.Text.Contains("."))
                            display.Text += ".";
                        break;
                }
      }
            catch (Exception ex)
            {
                MessageBox.Show("Sorry for the inconvienience. Unexpected error occurred. Details:" + ex.Message);
            }
      }

        /*Following block commented out because I cant figure out what this code is supposed to do. 
        I think it is supposed to allow keyboard input, but in practice does not work with my code*/

        //private void txtInput_Keypress(object sender, KeyPressEventArgs e)
        //{
        //    switch (e.KeyChar)
        //    {
        //        case '1':
        //        case '2':
        //        case '3':
        //        case '4':
        //        case '5':
        //        case '6':
        //        case '7':
        //        case '8':
        //        case '9':
        //        case '0':
        //        case '+': 
        //        case '-': 
        //        case '*': 
        //        case '/': 
        //        case '.':
        //            break;
        //        default:
        //            e.Handled = true;
        //            MessageBox.Show("Only Numbers and +,-,/,*, . are allowed.");
        //            break;
        //    }
        //}
      
       private void display_TextChanged(object sender, EventArgs e)
       {
           //Is there supposed to be code here?
       }

        private void multlabel_Click(object sender, EventArgs e)
        {
            operand1 = display.Text;
            operation = '*';
            display.Text = string.Empty;
         
        }

        private void minuslabel_Click(object sender, EventArgs e)
        {
            operand1 = display.Text;
            operation = '-';
            display.Text = string.Empty;
        }

        private void pluslabel_Click(object sender, EventArgs e)
        {
            operand1 = display.Text;
            operation = '+';
            display.Text = string.Empty;
        }
        private void divlabel_Click(object sender, EventArgs e)
        {
            operand1 = display.Text;
            operation = '/';
            display.Text= string.Empty;
        }

        private void decimallabel_Click(object sender, EventArgs e)
        {
            //no code here but my decimal works as expected.
        }

        private void equals_Click(object sender, EventArgs e)
        {
            operand2 = display.Text;
            double opr1, opr2;
            double.TryParse(operand1, out opr1);
            double.TryParse(operand2, out opr2);
            
            switch (operation)
            {
                case '+':
                    result= (opr1 + opr2).ToString ();
                    break;
                case '-':
                    result = (opr1 - opr2).ToString();
                    break;
                case 'x':
                    //ERR Mult does not remember opr1, sets result to whatever default or previous result was
                    result = (opr1 * opr2).ToString();  
                    break;
                case '/':
                    if (opr2 != 0)
                    {
                        result = (opr1 / opr2).ToString();
                    }
                    else
                    {
                        MessageBox.Show("You can not divide by zero."); 
                    }
                    break;
            }
            
                display.Text = result.ToString(); //Had a null reference exception until gave result default value 
        }

        private void clearlabel_Click(object sender, EventArgs e)
        {
            display.Text = string.Empty;
            operand1 = string.Empty;
            operand2 = string.Empty;

        }
    }
}
